<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>墨染癫途：磁带未来版</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">
    <style>
        :root {
            /* 磁带未来主义配色：琥珀色终端 + 深灰塑料 */
            --screen-bg: #1a1510;
            --terminal-amber: #ffb000;
            --terminal-dim: #996600;
            --plastic-case: #2b2b2b;
            --plastic-light: #3d3d3d;
            --plastic-dark: #1a1a1a;
            --alert-red: #ff3333;
            
            --font-term: 'VT323', monospace;
            --font-cn: 'ZCOOL KuaiLe', cursive; 
        }

        body {
            background-color: #111;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            color: var(--terminal-amber);
            font-family: var(--font-term), sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- 物理外壳 (The Casing) --- */
        #device-casing {
            width: 900px;
            max-width: 95vw;
            height: 90vh;
            background: var(--plastic-case);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                inset 2px 2px 5px var(--plastic-light),
                inset -2px -2px 5px var(--plastic-dark),
                0 0 50px rgba(0,0,0,0.8);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* 装饰螺丝 */
        .screw {
            width: 10px; height: 10px;
            background: #111;
            border-radius: 50%;
            position: absolute;
            box-shadow: inset 1px 1px 2px #555;
        }
        .tl { top: 10px; left: 10px; }
        .tr { top: 10px; right: 10px; }
        .bl { bottom: 10px; left: 10px; }
        .br { bottom: 10px; right: 10px; }

        /* --- 屏幕区域 (The Screen) --- */
        #crt-screen {
            flex: 1;
            background-color: var(--screen-bg);
            border-radius: 60px / 20px; /* 曲面屏模拟 */
            border: 2px solid #000;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.7);
            padding: 30px;
            display: flex;
            flex-direction: column;
        }

        /* 扫描线与发光特效 */
        #crt-screen::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 10;
        }
        
        /* 琥珀色辉光 */
        .glow-text {
            text-shadow: 0 0 5px var(--terminal-amber), 0 0 10px var(--terminal-dim);
        }

        /* --- 游戏布局 --- */
        /* 上半部分：ASCII 视窗 */
        #visual-panel {
            flex: 1;
            border: 2px solid var(--terminal-dim);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            background: repeating-linear-gradient(
                0deg,
                rgba(255, 176, 0, 0.05),
                rgba(255, 176, 0, 0.05) 1px,
                transparent 1px,
                transparent 2px
            );
        }

        .ascii-art {
            font-size: 14px;
            line-height: 14px;
            white-space: pre;
            position: absolute;
            left: 50%; top: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            opacity: 0.9;
        }

        /* 下半部分：UI 控制台 */
        #control-panel {
            flex: 1;
            display: flex;
            gap: 20px;
        }

        #log-display {
            flex: 2;
            font-size: 1.4rem;
            line-height: 1.6;
            font-family: var(--font-cn); /* 中文用这种字体更有符咒感 */
            overflow-y: auto;
            border-right: 2px dashed var(--terminal-dim);
            padding-right: 15px;
        }
        
        /* 滚动条样式 */
        #log-display::-webkit-scrollbar { width: 8px; }
        #log-display::-webkit-scrollbar-thumb { background: var(--terminal-dim); }

        #action-menu {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* 机械按钮样式 */
        .tape-btn {
            background: linear-gradient(to bottom, #444, #333);
            border: 2px solid #111;
            border-top: 2px solid #555;
            color: #ddd;
            padding: 15px;
            font-family: var(--font-term);
            font-size: 1.2rem;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 0 4px 0 #111;
            transition: all 0.1s;
            text-align: center;
            position: relative;
        }

        .tape-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #111;
            background: #222;
        }

        .tape-btn::after {
            content: '';
            position: absolute;
            top: 5px; right: 5px;
            width: 5px; height: 5px;
            background: #ffb000;
            border-radius: 50%;
            opacity: 0.5;
        }
        .tape-btn:hover::after {
            opacity: 1;
            box-shadow: 0 0 5px #ffb000;
        }

        /* 状态栏：贴在屏幕下方的贴纸风格 */
        #sticker-label {
            position: absolute;
            bottom: 40px; right: 50px;
            background: #ddd;
            color: #000;
            padding: 5px 10px;
            font-family: sans-serif;
            font-weight: bold;
            font-size: 0.8rem;
            transform: rotate(-2deg);
            box-shadow: 2px 2px 2px rgba(0,0,0,0.5);
            z-index: 20;
        }

        /* 故障文字 */
        .glitch-text {
            display: inline-block;
            animation: text-shake 0.3s infinite;
            color: var(--alert-red);
            text-shadow: 1px 0 #000;
        }
        @keyframes text-shake {
            0% { transform: translate(1px, 1px); }
            50% { transform: translate(-1px, -1px); }
            100% { transform: translate(1px, -1px); }
        }

    </style>
</head>
<body>

    <div id="device-casing">
        <div class="screw tl"></div><div class="screw tr"></div>
        <div class="screw bl"></div><div class="screw br"></div>

        <div id="crt-screen" class="glow-text">
            
            <div id="visual-panel">
                <div class="ascii-art" id="ascii-canvas">
                    </div>
            </div>

            <div id="control-panel">
                <div id="log-display">
                    系统启动中...<br>
                    加载认知模块... [OK]<br>
                    加载恐惧抑制器... [ERROR]<br>
                    --------------------
                </div>
                <div id="action-menu">
                    </div>
            </div>

        </div>
        
        <div id="sticker-label">
            PROPERTY OF ASYLUM<br>
            NO: 999-X
        </div>
    </div>

    <script>
        // --- 游戏数据 ---
        const gameState = {
            san: 100,
            inventory: [],
        };

        // ASCII 素材库 (医生、护士、金丹)
        const arts = {
            doctor: `
   .---.
  ( O O )  < [I AM A BEAR]
   | = |
  /|   |\\  // SAW
 / |___| \\//
   |   |
            `,
            doctor_horror: `
   /X X\\
  ( @ @ )  < [RUN]
   \\ ^ /
   /|||\\
  //|||\\\\
            `,
            nurse: `
    ___
   /   \\
  | o o |
   \\ ~ /
   /   \\
  (     )
            `
        };

        const scenes = {
            'start': {
                text: "检测到生命体征...<br>位置：第4号手术台。<br><br>左侧检测到高能反应 [医生]。<br>右侧检测到灵体波动 [护士]。<br><br>医生手里拿着一颗<span class='glitch-text'>[眼球]</span>，他称之为‘金丹’。",
                art: arts.doctor,
                choices: [
                    { text: "大声呼救", next: 'scream' },
                    { text: "询问保修期 (幽默)", next: 'humor' },
                    { text: "扫描物体结构 (烧脑)", next: 'analyze' }
                ]
            },
            'scream': {
                text: "警告：患者情绪失控。<br>执行强制镇静程序...<br><br>视线变黑。<br>SYSTEM HALTED.",
                art: arts.doctor_horror,
                choices: [
                    { text: "重启系统", next: 'start' }
                ]
            },
            'humor': {
                text: "认知滤网重置...<br>目标 [医生] 转化为 [友善单位]。<br><br>医生挠了挠头：“亲，终身保修哦。”<br>你吞下了荔枝味的金丹。<br>SAN值 -20 (快乐)",
                art: arts.doctor, // 这里其实可以换个更可爱的ASCII
                choices: [
                    { text: "感觉良好...", next: 'start' }
                ]
            },
            'analyze': {
                text: "分析模式开启...<br>警告：理智流失。<br><br>解析目标物体...<br>>> 结果：活体视神经组织。<br>>> 隐藏信息：摩尔斯电码 'CUT THE RED WIRE'。",
                art: arts.doctor_horror,
                choices: [
                    { text: "切断红线", next: 'win' },
                    { text: "放弃", next: 'scream' }
                ]
            },
            'win': {
                text: "执行指令：CUT_WIRE。<br>目标解体。<br>获得物品：[真视之眼]。<br><br>第一章：测试结束。",
                art: arts.nurse,
                choices: [
                    { text: "重新开始", next: 'start' }
                ]
            }
        };

        // --- 核心逻辑 ---

        const logEl = document.getElementById('log-display');
        const actionMenu = document.getElementById('action-menu');
        const artEl = document.getElementById('ascii-canvas');

        function typeWriter(html, callback) {
            logEl.innerHTML = "";
            // 简单的逐字显示模拟，为了支持HTML标签，这里简化处理，直接显示
            // 真实的磁带风格通常是光标闪烁逐字出
            logEl.innerHTML = html; 
            if(callback) callback();
        }

        function loadScene(id) {
            const scene = scenes[id];
            
            // 更新画面 (ASCII)
            if(scene.art) {
                artEl.innerText = scene.art;
            }

            // 更新文本
            typeWriter(scene.text, () => {
                // 生成机械按钮
                actionMenu.innerHTML = "";
                scene.choices.forEach(choice => {
                    const btn = document.createElement('div');
                    btn.className = 'tape-btn';
                    btn.innerText = choice.text;
                    btn.onclick = () => {
                        // 简单的按钮下压音效感（视觉）
                        setTimeout(() => loadScene(choice.next), 150);
                    };
                    actionMenu.appendChild(btn);
                });
            });
        }

        // 初始化
        setTimeout(() => {
            loadScene('start');
        }, 1000); // 模拟开机延迟

    </script>
</body>
</html>
